<div class="fixed inset-0 bg-black/40 z-40" (click)="closed.emit()"></div>
<div class="fixed top-16 right-4 w-64 bg-white rounded-xl shadow-lg p-4 z-50 overflow-hidden">
  <!-- ROOT MENU -->
  <ng-container [ngSwitch]="section">
    <ul *ngSwitchCase="'root'" class="space-y-2 text-black">
      <li class="flex items-center gap-2 font-medium"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="text-gray-600"><circle cx="12" cy="7" r="4"/><path d="M5.5 21a8.38 8.38 0 0113 0"/></svg> <span>{{fullname}}</span></li>
      <li class="flex items-center justify-between cursor-pointer hover:bg-gray-100 p-1 rounded" (click)="section='settings'"><span class="flex items-center gap-2"><svg width="16" height="16" stroke="currentColor" fill="none" viewBox="0 0 24 24"><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg> Cài đặt</span><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="9 18 15 12 9 6"/></svg></li>
      <li class="flex items-center gap-2 cursor-pointer hover:bg-gray-100 p-1 rounded"><svg width="16" height="16" stroke="currentColor" fill="none" viewBox="0 0 24 24"><path d="M12 1v4M12 19v4M5.64 5.64l2.83 2.83M15.53 15.53l2.83 2.83M1 12h4M19 12h4M5.64 18.36l2.83-2.83M15.53 8.47l2.83-2.83"/></svg> Nói chuyện với chatbot</li>
      <li class="flex items-center gap-2 cursor-pointer hover:bg-gray-100 p-1 rounded"><svg width="16" height="16" stroke="currentColor" fill="none" viewBox="0 0 24 24"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h10"/></svg> Liên hệ và hỗ trợ</li>
      <li class="flex items-center gap-2 cursor-pointer hover:bg-gray-100 p-1 rounded"><svg width="16" height="16" stroke="currentColor" fill="none" viewBox="0 0 24 24"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 113 3L7 19l-4 1 1-4 12.5-12.5z"/></svg> Đóng góp ý kiến</li>
      <li class="flex items-center gap-2 cursor-pointer hover:bg-gray-100 p-1 rounded text-red-600" (click)="logout()"><svg width="16" height="16" stroke="currentColor" fill="none" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg> Đăng xuất</li>
    </ul>

    <!-- SETTINGS -->
    <ul *ngSwitchCase="'settings'" class="space-y-2 text-black">
      <li class="flex items-center gap-2 cursor-pointer hover:bg-gray-100 p-1 rounded" (click)="section='root'"><svg width="16" height="16" stroke="currentColor" fill="none" viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg> Cài đặt</li>
      <li class="flex items-center justify-between cursor-pointer hover:bg-gray-100 p-1 rounded"><span>Thay đổi thông tin</span><svg width="14" height="14" viewBox="0 0 24 24" stroke="currentColor" fill="none"><polyline points="9 18 15 12 9 6"/></svg></li>
      <li class="flex items-center justify-between cursor-pointer hover:bg-gray-100 p-1 rounded"><span>Thay đổi mật khẩu</span><svg width="14" height="14" viewBox="0 0 24 24" stroke="currentColor" fill="none"><polyline points="9 18 15 12 9 6"/></svg></li>
      <li class="flex items-center justify-between cursor-pointer hover:bg-gray-100 p-1 rounded" (click)="section='language'"><span>Thay đổi ngôn ngữ</span><svg width="14" height="14" viewBox="0 0 24 24" stroke="currentColor" fill="none"><polyline points="9 18 15 12 9 6"/></svg></li>
    </ul>
    <!-- LANGUAGE -->
    <!-- <div *ngSwitchCase="'language'" class="space-y-3">
      <div class="flex items-center gap-2 cursor-pointer hover:bg-gray-100 p-1 rounded" (click)="section='settings'"><svg width="16" height="16" stroke="currentColor" fill="none" viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg> Thay đổi ngôn ngữ</div>
      <input type="text" [(ngModel)]="searchLang" placeholder="Tìm kiếm ngôn ngữ" class="w-full rounded h-7 px-2 bg-gray-200" />
      <ul class="max-h-40 overflow-y-auto space-y-1">
        <li *ngFor="let lang of languages | filter:searchLang" (click)="selectLang(lang)" class="px-2 py-1 cursor-pointer hover:bg-gray-100 rounded flex justify-between items-center">
          {{ lang }}
          <svg *ngIf="(auth.currentUser$ | async)?.language === lang" width="14" height="14" viewBox="0 0 24 24" stroke="currentColor" fill="none"><polyline points="20 6 9 17 4 12"/></svg>
        </li>
      </ul>
    </div> -->
  </ng-container>
</div>